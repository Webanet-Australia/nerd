"use strict";function get_select_control(t){return get_tab_group(t)+"-"+get_form_group(t)}function get_form_group(t){return t.closest("[data-fg]").attr("data-fg")}function get_tab_group(t){return t.closest("[data-bd]").attr("data-bd")}function select_populate(t,o){o.empty(),$.each(t,function(t,e){o.append($("<option/>",{value:t,text:e}))})}$(function(){var n=0;$(document).ready(function(){selectNavItem("jobs")}),$('input[type="checkbox"]').on("click",function(){var t="#"+$(this).attr("data-text");"checked"==$(this).attr("checked")?$(t).val("0"):$(t).val("1")}),$('[name="chk-xpath"').on("click",function(){$("#div-xpath").toggleClass("d-none")}),$(".btn-url-add").on("click",function(){var t=get_tab_group($(this)),e=$("#sel-"+t+"-url"),o=$("#txt-"+t+"-url");e.append('<option value="'+e.find("option:selected").length+'">'+o.val()+"</option>"),jobCrawl[t].urls.push({uri:o.val(),filters:[],cookies:[]}),o.val(""),$("#sel-"+t+"-filter").empty(),$("#sel-"+t+"-cookie").empty()}),$(".btn-url-del").on("click",function(){var t=get_tab_group($(this)),e=$("#sel-"+t+"-url");jobCrawl[t].urls.splice(e.prop("selectedIndex"),1),e.find("option:selected").remove(),$("#sel-"+t+"-filter").empty(),$("#sel-"+t+"-cookie").empty()}),$(".sel-url").on("click",function(){var t=get_tab_group($(this));n=$("#sel-"+t+"-url").prop("selectedIndex");var e=jobCrawl[t].urls[n];select_populate(e.filters,$("#sel-"+t+"-filter")),select_populate(e.cookies,$("#sel-"+t+"-cookie"))}),$(".btn-list-add").on("click",function(){var t=get_select_control($(this)),e=$("#txt-"+t).val(),o=get_tab_group($(this)),l=get_form_group($(this))+"s";e.length&&($("#sel-"+t).append($("<option>",{value:e,text:e})),$("#txt-"+t).val(""),console.log(o),jobCrawl[o].urls[n][l].push(e))}),$(".btn-list-del").on("click",function(){var t=get_select_control($(this)),e=$("#sel-"+t).prop("selectedIndex"),o=get_tab_group($(this)),l=get_form_group($(this))+"s";$("#sel-"+t).find("option:selected").remove(),$("#txt-"+t).val(""),jobCrawl[o].urls[n][l].splice(e,1)}),$(".sel-lists").bind("click",function(){var t=get_select_control($(this)),e=$("#sel-"+t+" option:selected").text();$("#txt-"+t).val(e)})}),$(".btn-submit").on("click",function(t){t.preventDefault(),$.ajax({method:"POST",url:"/jobs/"+$("#txt-job").val(),data:JSON.stringify($.extend(jobCrawl,$("#frm-jobs-edit").serializeFormJSON())),contentType:"application/json",dataType:"json",headers:{Accept:"application/json"}}).done(function(t){t.code}).fail(function(t){console.log("erorr"),console.log(t)})});