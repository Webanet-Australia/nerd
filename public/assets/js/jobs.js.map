{"version":3,"sources":["jobs.js"],"names":["responseAdd","$frm","resp","html","$","after","modal","responseRemove","val","remove","document","ready","selectNavItem","on","e","selectedID","find","attr","row","text","click","location"],"mappings":"AAAA;;AAEA;;AAEA,SAASA,WAAT,CAAqBC,IAArB,EAA2BC,IAA3B,EAAiC;;AAE/B,MAAIC,OAAO,kBAAkBD,KAAK,KAAL,EAAY,IAAZ,CAAlB,GAAsC,IAAtC,GAA6C,MAA7C,GAAsDA,KAAK,KAAL,EAAY,OAAZ,CAAtD,GAA6E,OAA7E,GAAuF,MAAvF,GAAgGA,KAAK,KAAL,EAAY,aAAZ,CAAhG,GAA6H,OAA7H,GAAuI,MAAvI,GAAgJ,yCAAhJ,GAA4L,6CAA5L,GAA4O,OAA5O,GAAsP,OAAjQ;;AAEAE,IAAE,qBAAF,EAAyBC,KAAzB,CAA+BF,IAA/B;;AAEAC,IAAE,UAAF,EAAcE,KAAd,CAAoB,MAApB;AACD;;AAED,SAASC,cAAT,CAAwBN,IAAxB,EAA8BC,IAA9B,EAAoC;;AAElC,MAAIA,KAAK,MAAL,KAAgB,GAApB,EAAyB;;AAEvBE,MAAE,iBAAiBA,EAAE,eAAF,EAAmBI,GAAnB,EAAjB,GAA4C,IAA9C,EAAoDC,MAApD;;AAEAL,MAAE,aAAF,EAAiBE,KAAjB,CAAuB,MAAvB;AACD;AACF;;AAEDF,EAAE,YAAY;;AAEZ;AACAA,IAAEM,QAAF,EAAYC,KAAZ,CAAkB,YAAY;AAC5BC,kBAAc,MAAd;AACD,GAFD;;AAIA;AACAR,IAAE,aAAF,EAAiBS,EAAjB,CAAoB,eAApB,EAAqC,UAAUC,CAAV,EAAa;;AAEhD,QAAIC,aAAaX,EAAE,eAAF,EAAmBI,GAAnB,EAAjB;;AAEAJ,MAAE,aAAF,EAAiBY,IAAjB,CAAsB,MAAtB,EAA8BC,IAA9B,CAAmC,QAAnC,EAA6C,WAAWF,UAAxD;;AAEA,QAAIG,MAAMd,EAAE,OAAF,EAAWY,IAAX,CAAgB,eAAeD,UAAf,GAA4B,IAA5C,CAAV;;AAEAX,MAAE,YAAF,EAAgBI,GAAhB,CAAoBU,IAAIF,IAAJ,CAAS,UAAT,EAAqBG,IAArB,EAApB;AACD,GATD;;AAWAf,IAAE,WAAF,EAAegB,KAAf,CAAqB,YAAY;AAC/BV,aAASW,QAAT,GAAoB,WAAWjB,EAAE,eAAF,EAAmBI,GAAnB,EAAX,GAAsC,GAAtC,GAA4CJ,EAAE,IAAF,EAAQa,IAAR,CAAa,eAAb,CAAhE;AACD,GAFD;AAGD,CAtBD;AAuBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA","file":"jobs.js","sourcesContent":["'use strict';\n\n// Add new job table\n\nfunction responseAdd($frm, resp) {\n\n  var html = '<tr data-id=\"' + resp['job']['id'] + '\">' + '<td>' + resp['job']['title'] + '</td>' + '<td>' + resp['job']['description'] + '</td>' + '<td>' + '<span class=\"fa fa-sm fa-link\">0</span>' + '<span class=\"fa fa-sm fa-tag pl-2\">0</span>' + '</td>' + '</tr>';\n\n  $('table.table tr:last').after(html);\n\n  $('#mdl-add').modal('hide');\n}\n\nfunction responseRemove($frm, resp) {\n\n  if (resp['code'] == 200) {\n\n    $('tr[data-id=\"' + $('.txt-selected').val() + '\"]').remove();\n\n    $('#mdl-remove').modal('hide');\n  }\n}\n\n$(function () {\n\n  //Show Jobs Nav Item\n  $(document).ready(function () {\n    selectNavItem('jobs');\n  });\n\n  //Modal remove show - set title textbox value\n  $('#mdl-remove').on('show.bs.modal', function (e) {\n\n    var selectedID = $('.txt-selected').val();\n\n    $(\"#mdl-remove\").find('form').attr('action', '/jobs/' + selectedID);\n\n    var row = $(\"table\").find('[data-id=\"' + selectedID + '\"]');\n\n    $('#txt-title').val(row.find('td:first').text());\n  });\n\n  $('.navigate').click(function () {\n    document.location = '/jobs/' + $('.txt-selected').val() + '/' + $(this).attr('data-navigate');\n  });\n});\n/*\n//jobs list table click\n$('tr').on('click', function () {\n\n  $('tr').css('background-color', '#fff');\n  $(this).css('background-color', '#f5f5f5');\n\n  $('.item-trained').attr('disabled', 'disabled');\n\n  $('#txt-job').val($(this).attr('data-id'));\n\n  //$('#txt-cron').val($(this).attr('data-cron'));\n\n  //var cp = $('#txt-cron');\n\n  //cp.cronPicker();\n  //cp.cronPicker()\n  //cp.setCronExpression($(this).attr('data-cron'));\n\n  $(\"#toolbar button.job-selected\").removeAttr('disabled');\n\n  var status = $(this).find('td:last').html().trim();\n\n  if (status == 'Built') {\n    $('.item-trained').removeAttr('disabled');\n  }\n\n  //if (status == 'Training') {\n  //  $('#btn-start').removeAttr('disabled');\n  //}\n});\n  $('form[name=\"schedule\"]').on('submit', function (e) {\n    e.preventDefault();\n    var $f = $(this);\n    alertSpin();\n    $.ajax({\n      type: 'post',\n      url: '/jobs/' + $('#txt-job').val() + '/schedule',\n      data: '{\"cron\": \"' + $('#txt-cron').val() + '\"}'\n    }).done(function (r) {\n      alertResponse(r);\n      console.log(r);\n    });\n  });\n\n  $('form[name=\"schedule\"]').on('submit', function (e) {\n    e.preventDefault();\n    console.log($('#txt-cron').val());\n\n    $.ajax({\n        method: 'POST',\n        url: $('#frm-edit-job').attr('action'),\n        data: JSON.stringify($.extend($('#frm-edit-job').serializeFormJSON(), jobCrawl)),\n        contentType: \"application/json\",\n        dataType: \"json\",\n        headers: {\n          'Accept': 'application/json'\n      }\n    }).done(function(r) {\n         if (r['status'] == 'success') {\n          document.location = '/jobs/list';\n        }\n     }).fail(function(r) {\n         console.log('erorr'); console.log(r);\n     });\n\n  });\n*/\n//# sourceMappingURL=jobs.js.map\n//# sourceMappingURL=jobs.js.map\n//# sourceMappingURL=jobs.js.map\n"]}